<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><title>The Shoes Manual // Events</title><script type="text/javascript" src="static/code_highlighter.js"></script><script type="text/javascript" src="static/code_highlighter_ruby.js"></script><style type="text/css">@import 'static/manual.css';</style></head><body><div id="main"><div id="manual"><h2>The Shoes Manual</h2><h1>Events</h1><div class="intro"><p>Wondering how to catch stray mouse clicks or keyboard typing?  Events are sent to a slot whenever a mouse moves inside the slot.  Or whenever a key is pressed.  Even when the slot is created or destroyed.  You can attach a block to each of these events.</p></div><p>Mouse events include <code>motion</code>, <code>click</code>, <code>hover</code> and <code>leave</code>.  Keyboard typing is represented by the <code>keypress</code> event.  And the <code>start</code> and <code>finish</code> events indicate when a canvas comes into play or is discarded.</p><p>So, let's say you want to change the background of a slot whenever the mouse floats over it.  We can use the <code>hover</code> event to change the background when the mouse comes inside the slot.  And <code>leave</code> to change back when the mouse floats away.</p><pre><code class="rb"> Shoes.app do
   s = stack width: 200, height: 200 do
     background red
     hover do
       s.clear { background blue }
     end
     leave do
       s.clear { background red }
     end
   end
 end
</code></pre><a name="click{|button,left,top|...}"></a><div class="method"><a href="Events.html#click{|button,left,top|...}">click { |button, left, top| ... }</a> » self</div><div class="sample"><p>The click block is called when a mouse button is clicked.  The <code>button</code> is the number of the mouse button which has been pressed.  The <code>left</code> and <code>top</code> are the mouse coordinates at which the click happened.</p><p>To catch the moment when the mouse is unclicked, see the <a href="Events.html#release">release</a> event.</p></div><a name="finish{|self|...}"></a><div class="method"><a href="Events.html#finish{|self|...}">finish { |self| ... }</a> » self</div><div class="sample"><p>When a slot is removed, it's finish event occurs.  The finish block is immediately handed <code>self</code>, the slot object which has been removed.</p></div><a name="hover{|self|...}"></a><div class="method"><a href="Events.html#hover{|self|...}">hover { |self| ... }</a> » self</div><div class="sample"><p>The hover event happens when the mouse enters the slot.  The block gets <code>self</code>, meaning the object which was hovered over.</p><p>To catch the mouse exiting the slot, check out the <a href="Events.html#leave">leave</a> event.</p></div><a name="keypress{|key|...}"></a><div class="method"><a href="Events.html#keypress{|key|...}">keypress { |key| ... }</a> » self</div><div class="sample"><p>Whenever a key (or combination of keys) is pressed, the block gets called.  The block is sent a <code>key</code> which is a string representing the character (such as the letter or number) on the key.  For special keys and key combos, a Ruby symbol is sent, rather than a string.</p><p>So, for example, if <code>Shift-a</code> is pressed, the block will get the string <code>&quot;A&quot;</code>.</p><p>However, if the F1 key is pressed, the <code>:f1</code> symbol is received.  For <code>Shift-F1</code>, the symbol would be <code>:shift_f1</code>.</p><p>The modifier keys are <code>control</code>, <code>shift</code> and <code>alt</code>.  They appear in that order.  If <code>Shift-Control-Alt-PgUp</code> is pressed, the symbol will be <code>:control_shift_alt_page_up</code>.</p><p>One thing about the shift key.  You won't see the shift key on most keys.  On US keyboards, <code>Shift-7</code> is an ampersand.  So you'll get the string <code>&quot;&amp;&quot;</code> rather than <code>:shift_5</code>.  And, if you press <code>Shift-Alt-7</code> on such a keyboard, you'll get the symbol: <code>:alt_&amp;</code>.  You'll only see the shift modifier on the special keys listed a few paragraphs down.</p><pre><code class="rb"> Shoes.app do
   @info = para "NO KEY is PRESSED."
   keypress do |k|
     @info.replace "#{k.inspect} was PRESSED."
   end
 end
</code></pre><p>Keep in mind that Shoes itself uses a few hotkeys.  Alt-Period (<code>:alt_.</code>), Alt-Question (<code>:alt_?</code>) and Alt-Slash (<code>:alt_/</code>) are reserved for Shoes.</p><p>The list of special keys is as follows: <code>:escape</code>, <code>:delete</code>, <code>:backspace</code>, <code>:tab</code>, <code>:page_up</code>, <code>:page_down</code>, <code>:home</code>, <code>:end</code>, <code>:left</code>, <code>:up</code>, <code>:right</code>, <code>:down</code>, <code>:f1</code>, <code>:f2</code>, <code>:f3</code>, <code>:f4</code>, <code>:f5</code>, <code>:f6</code>, <code>:f7</code>, <code>:f8</code>, <code>:f9</code>, <code>:f10</code>, <code>:f11</code> and <code>:f12</code>.</p><p>One caveat to all of those rules: normally the Return key gives you a string <code>&quot;\n&quot;</code>.  When pressed with modifier keys, however, you end up with <code>:control_enter</code>, <code>:control_alt_enter</code>, <code>:shift_alt_enter</code> and the like.</p></div><a name="leave{|self|...}"></a><div class="method"><a href="Events.html#leave{|self|...}">leave { |self| ... }</a> » self</div><div class="sample"><p>The leave event takes place when the mouse cursor exits a slot.  The moment it no longer is inside the slot's edges.  When that takes place, the block is called with <code>self</code>, the slot object which is being left.</p><p>Also see <a href="Events.html#hover">hover</a> if you'd like to detect the mouse entering a slot.</p></div><a name="motion{|left,top|...}"></a><div class="method"><a href="Events.html#motion{|left,top|...}">motion { |left, top| ... }</a> » self</div><div class="sample"><p>The motion block gets called every time the mouse moves around inside the slot.  The block is handed the cursor's <code>left</code> and <code>top</code> coordinates.</p><pre><code class="rb"> Shoes.app width: 200, height: 200 do
   background black
   fill white
   @circ = oval 0, 0, 100, 100
   motion do |top, left|
     @circ.move top - 50, left - 50
   end
 end
</code></pre></div><a name="release{|button,left,top|...}"></a><div class="method"><a href="Events.html#release{|button,left,top|...}">release { |button, left, top| ... }</a> » self</div><div class="sample"><p>The release block runs whenever the mouse is unclicked (on mouse up).  When the finger is lifted.  The <code>button</code> is the number of the button that was depressed.  The <code>left</code> and <code>top</code> are the coordinates of the mouse at the time the button was released.</p><p>To catch the actual mouse click, use the <a href="Events.html#click">click</a> event.</p></div><a name="start{|self|...}"></a><div class="method"><a href="Events.html#start{|self|...}">start { |self| ... }</a> » self</div><div class="sample"><p>The first time the slot is drawn, the start event fires.  The block is handed <code>self</code>, the slot object which has just been drawn.</p></div><p class="next">Next: <a href="Manipulation.html">Manipulation Blocks</a></p></div><div class="sidebar"><img src="static/shoes-icon.png"></img><ul><li><a href="http://shoesrb.com/manual/" class="prime">HELP</a></li><li><a href="Hello.html">Hello!</a></li><li><a href="Shoes.html">Shoes</a></li><li><a href="Slots.html">Slots</a><ul class="sub"><li><a href="Art.html">Art</a></li><li><a href="Element.html">Element</a></li><li><a href="Events.html">Events</a></li><li><a href="Manipulation.html">Manipulation</a></li><li><a href="Position.html">Position</a></li><li><a href="Traversing.html">Traversing</a></li></ul></li><li><a href="Elements.html">Elements</a></li><li><a href="AndSoForth.html">AndSoForth</a></li></ul></div></div></body></html>